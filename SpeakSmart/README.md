# SpeakSmart: Языковой тренажер и ассистент поддержки в Telegram

Telegram-бот для практики разговорной речи на иностранном языке с функцией интеллектуальной поддержки клиентов. Бот использует гибридную систему проверки произношения для максимальной точности.

##    Возможности

- Голосовая практика: Получаем фразу, ответаем голосом, получаем обратную связь.
- Умная проверка: Гибридная система распознавания речи (ASR + ручной ввод текста) для точной оценки ответа.
- Отслеживание прогресса: Ведется детальная статистика по каждому пользователю (количество правильных ответов, точность).
- Техническая поддержка: Интеллектуальный поиск по базе знаний (FAQ). Если бот не находит ответ — вопрос автоматически эскалируется оператору в Telegram.
- Перевод на оператора: Мгновенные уведомления оператора о сложных вопросах с полным контекстом.

##  Логика работы бота

### Главное меню (/start)
Пользователь запускает бота командой `/start` и получает приветственное сообщение с интерактивным меню для выбора режима работы.

### Режим практики (/practice)
1. **Инициализация:** Пользователь запускает режим практики.
2. **Запрос фразы:** Бот отправляет пользователю текстовую или голосовую фразу для повторения.
3. **Голосовой ответ:** Пользователь записывает и отправляет голосовое сообщение с произнесенной фразой.
4. **Запрос текста:** Для исключения ошибок распознавания бот запрашивает у пользователя текстовый ввод той фразы, которую он произнес.
5. **Гибридная проверка:** Система анализирует и сопоставляет результат автоматического распознавания речи (ASR) и текст, введенный пользователем.
6. **Обратная связь:** Бот сообщает о результате (правильно/неправильно) и обновляет статистику пользователя.

### Режим поддержки (/support)
1. **Запрос:** Пользователь вводит свой вопрос в свободной форме или выбирает из меню.
2. **Интеллектуальный поиск:** Бот ищет совпадения по ключевым словам в базе знаний (`faq.json`).
3. **Реакция:**
   - Если ответ найден — бот немедленно его предоставляет.
   - Если ответ не найден — бот предлагает передать вопрос живому оператору.
4. **Эскалация:** При согласии пользователя бот отправляет уведомление оператору в Telegram, включая ID пользователя, его имя и текст вопроса.

##  Технологический стек

- **Python 3.10+** — основной язык разработки
- **Aiogram 3.10.0** — асинхронный фреймворк для Telegram Bot API
- **SQLAlchemy 2.0.25** — ORM для работы с базой данных SQLite
- **SpeechRecognition 3.10.0** — библиотека для работы с аудио
- **gTTS 2.5.4** — синтез речи из текста и генерация аудиофайлов

##  Структура проекта

SpeakSmart/
│
├── audio/ # Директория с аудиофайлами
│ ├── phrases/ # Заранее записанные фразы для практики
│ ├── temp/ # Временные файлы
│ └── user_responses/ # Ответы пользователей
│
├── data/ # Данные приложения
│ ├── database.db # SQLite база данных (создается автоматически)
│ └── faq.json # База знаний для поддержки
│
├── handlers/ # Обработчики сообщений и команд
│ ├── init.py
│ ├── start.py # Команда /start
│ ├── practice.py # Логика режима практики
│ ├── support.py # Логика режима поддержки
│ └── common.py # Общие обработчики
│
├── services/ # Бизнес-логика и внешние сервисы
│ ├── init.py
│ ├── database.py # Работа с БД (SQLAlchemy)
│ ├── faq_service.py # Поиск по базе знаний FAQ
│ ├── operator_service.py # Уведомления оператора
│ ├── speech_recognition.py # Распознавание речи (Whisper)
│ ├── tts_service.py # Синтез речи (gTTS)
│ └── voice_processor.py # Обработка аудио (Pydub)
│
├── temp_audio/ # Временная директория для аудио
├── utils/ # Вспомогательные модули
│ └── .env # Переменные окружения (не в git)
│
├── .gitignore
├── bot.log # Файл логов (создается автоматически)
├── config.py # Централизованный конфиг
├── main.py # Точка входа в приложение
├── requirements.txt # Зависимости проекта
└── README.md 


